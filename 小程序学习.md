# 小程序学习

## 启动机制

- 冷启动
  - 重新加载并且启动
- 热启动
  - 无需重启启动

### 版本更新

- 异步下载版本,用本地缓存的代码启动,下次冷启动更新版本

### 小程序销毁机制

- 在后台放置5分钟自动销毁
- 5秒钟连续两次以上手动系统内存的警告

## 双线程架构

- view视图线程
- App Service逻辑线程
- WeixinJSBridge作为桥接里面报错native

### 架构三问

1. 视图的持续更新是怎么实现的?

   - 通过setData来进行实现的
   - 通过webView.evaluateJavascript()

2. 使用setDate会遇到哪些问题

   - 视图线程和逻辑线程之间中转效率低下 阻塞>=200毫秒(30帧)会有明显卡顿
   - WKWebView有可能被回收,回收之后不能进行回退

3. 微信为什么要打造一个WXS语言 

   - WXS不兼容JavaScript 
   - WXS在ios上会比js快2-20
   - 直接操作视图数据提高效率
   - 不支持回调句柄

   视图层在polymer框架的基础之上,基于web component标准实现的,创建虚拟dom实现渲染.同vue相似

   webview层在native层之下

## 生命周期

### 逻辑线程生命周期

- 初始化状态
- 等待激活状态
- 激活状态
- 后台运行状态

## 小程序怎么实现icon

- img

  - 如果图标多了,有过多的网络请求
  - 不能修改颜色
  - 图标发大变虚

- 精灵图

  精灵图,连续的一组图片

- 使用css样式绘制

  - 位置颜色大小

- 矢量字体

  - 简单有效

- svg

  - [转化base64](http://www.sojson.com/image2base64.html)

### 有时候icon显示空白不正常显示

- ttf和woff
- svg